# Chiva Computer ‚Äî E-commerce com Pagamentos Paysuite

Sistema completo de e-commerce com integra√ß√£o de pagamentos via Paysuite (M-Pesa e e-Mola), gerenciamento de produtos, carrinho de compras, e √°rea administrativa.

## üöÄ Novidades Recentes

### üìß Sistema de Notifica√ß√µes por Email (Outubro 2025) ‚≠ê NOVO!

Sistema completo de emails **100% GRATUITO** implementado!

**Funcionalidades:**
- ‚úÖ Confirma√ß√£o de pedido autom√°tica
- ‚úÖ Status de pagamento (aprovado/pendente/falhou)
- ‚úÖ Notifica√ß√£o de envio com tracking
- ‚úÖ Recupera√ß√£o de carrinho abandonado
- ‚úÖ Notifica√ß√£o de nova venda para admin
- ‚úÖ Templates HTML profissionais e responsivos
- ‚úÖ 300 emails/dia GR√ÅTIS via Brevo

**üìö Documenta√ß√£o de Emails:**

| Documento | Prop√≥sito | Tempo |
|-----------|-----------|-------|
| [üìß EMAIL_QUICKSTART.md](EMAIL_QUICKSTART.md) | Setup r√°pido (5min) | 5 min |
| [üìñ SISTEMA_NOTIFICACOES_EMAIL.md](SISTEMA_NOTIFICACOES_EMAIL.md) | Guia completo | 30 min |
| [üé® GUIA_VISUAL_BREVO.md](GUIA_VISUAL_BREVO.md) | Passo a passo Brevo | 15 min |
| [üíª EXEMPLOS_USO_EMAILS.md](EXEMPLOS_USO_EMAILS.md) | C√≥digo de exemplo | Consulta |
| [üìä RESUMO_EXECUTIVO_EMAILS.md](RESUMO_EXECUTIVO_EMAILS.md) | Vis√£o executiva | 10 min |

**üöÄ Setup R√°pido:**
```bash
# 1. Criar conta gr√°tis: https://www.brevo.com
# 2. Obter API Key no dashboard
# 3. Configurar .env:
BREVO_API_KEY=sua_api_key_aqui
BREVO_SENDER_EMAIL=seu_email@example.com

# 4. Testar:
cd backend
python test_email_system.py
```

---

### ‚úÖ Sistema de Pagamentos Completo (Outubro 2025)

O sistema de pagamentos est√° **100% funcional e pronto para produ√ß√£o**!

**Caracter√≠sticas:**
- ‚úÖ Integra√ß√£o completa com Paysuite Gateway
- ‚úÖ Suporte a M-Pesa e e-Mola
- ‚úÖ Rastreamento em tempo real de status de pagamento
- ‚úÖ UI moderna com feedback visual (aprovado/recusado/pendente)
- ‚úÖ Cart management inteligente (limpa apenas ap√≥s confirma√ß√£o)
- ‚úÖ Webhooks configur√°veis (dev e produ√ß√£o)
- ‚úÖ Logging completo para debugging

**üìö Documenta√ß√£o Completa:**

| Documento | Para Quem | Tempo |
|-----------|-----------|-------|
| [√çNDICE.md](INDICE.md) | Todos | 2 min |
| [RESUMO_EXECUTIVO.md](RESUMO_EXECUTIVO.md) | Vis√£o geral r√°pida | 5 min |
| [NGROK_DEVELOPMENT_SETUP.md](NGROK_DEVELOPMENT_SETUP.md) | Desenvolvimento local | 15 min |
| [PRODUCTION_DEPLOYMENT_GUIDE.md](PRODUCTION_DEPLOYMENT_GUIDE.md) | Deploy produ√ß√£o | 30-60 min |
| [FAQ.md](FAQ.md) | D√∫vidas espec√≠ficas | Consulta |

**ü§ñ Script Automatizado:**
```powershell
# Inicia ambiente de desenvolvimento com ngrok automaticamente
.\scripts\start-dev-with-ngrok.ps1
```

**Ver:** [INDICE.md](INDICE.md) para navega√ß√£o completa da documenta√ß√£o.

---

## üìã Resumo Geral

Este README descreve os passos pr√°ticos para testar localmente e subir o projeto em um Droplet no DigitalOcean usando Docker Compose. Cont√©m comandos PowerShell e instru√ß√µes de configura√ß√£o.

**Resumo r√°pido:**
- O reposit√≥rio j√° cont√©m Dockerfiles para backend e frontend, um `docker-compose.yml`, e um script auxiliar `scripts/deploy.ps1` que constr√≥i a imagem do backend usando depend√™ncias de produ√ß√£o (`requirements.prod.txt`) e sobe a stack.
- Antes de rodar em produ√ß√£o: atualize o `.env` com valores reais (ou use Secrets do DigitalOcean). N√£o versionar credenciais.
- **NOVO:** Configure `WEBHOOK_BASE_URL` para webhooks do Paysuite funcionarem (ver [PRODUCTION_DEPLOYMENT_GUIDE.md](PRODUCTION_DEPLOYMENT_GUIDE.md))

Pr√©-requisitos
- Droplet (Ubuntu 22.04+ recomendado) ou m√°quina local com Docker e Docker Compose.
- Docker e Docker Compose instalados no servidor.
- Registrar dom√≠nio e acesso para configurar DNS.

1) Preparar localmente (teste r√°pido)

1.1 Copiar o exemplo de env e ajustar valores:

```powershell
cd D:\Projectos\versao_1_chiva
cp .env.example .env
notepad .env
# Edite SECRET_KEY, DB_* e ALLOWED_HOSTS conforme necess√°rio
```

1.2 Build e subir via Docker Compose (usa `requirements.prod.txt` para o backend):

```powershell
.\scripts\deploy.ps1
```

O script far√°: build do backend (com ARG REQUIREMENTS=prod) e `docker compose up -d --build`.

1.3 Ver logs e checar endpoints:

```powershell
docker compose ps
docker compose logs -f backend
docker compose logs -f frontend
# Acesse no browser: http://localhost (frontend)
# API: http://localhost/api/
```

2) Preparar Droplet (DigitalOcean)

2.1 Crie um droplet (recomendado com espa√ßo suficiente; 2GB+ RAM como m√≠nimo para uma inst√¢ncia b√°sica).

2.2 Instale Docker e Docker Compose no Droplet (exemplo r√°pido para Ubuntu):

```bash
sudo apt update && sudo apt -y upgrade
sudo apt install -y ca-certificates curl gnupg lsb-release
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" \
  | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
sudo usermod -aG docker $USER
```

2.3 Clonar reposit√≥rio no Droplet e preparar `.env` (ou usar Secrets):

```bash
git clone https://github.com/<seu-usuario>/chiva-veresao-1.git
cd chiva-veresao-1
cp .env.example .env
nano .env
```

2.4 Build e rodar no Droplet

```bash
docker build --build-arg REQUIREMENTS=prod -t chiva-backend:prod ./backend
docker compose up -d --build
```

3) Banco de dados e migra√ß√µes
- O entrypoint (`backend/entrypoint.sh`) j√° tenta aplicar `python manage.py migrate` e `collectstatic`. Se preferir, rode manualmente:

```bash
docker compose exec backend python manage.py migrate --noinput
docker compose exec backend python manage.py createsuperuser
```

4) Configurar dom√≠nio e TLS

Op√ß√£o A ‚Äî DigitalOcean Load Balancer (recomendado):
- Crie um Load Balancer no painel DO e aponte para o droplet; ative HTTPS e solicite um certificado Let's Encrypt pelo painel.

Op√ß√£o B ‚Äî Nginx + Certbot no Droplet:

```bash
sudo apt install -y nginx certbot python3-certbot-nginx
# configurar nginx para proxy (ex.: /etc/nginx/sites-available/chiva.conf)
sudo nginx -t && sudo systemctl restart nginx
sudo certbot --nginx -d seu-dominio.com -d www.seu-dominio.com
```

5) Armazenamento de media (recomendado)
- Evite usar volume de host para `media` em produ√ß√£o. Use DigitalOcean Spaces (compat√≠vel S3) com `django-storages`.
- Posso adicionar `django-storages` e configura√ß√£o de exemplo se desejar.

6) Observa√ß√µes de seguran√ßa e produ√ß√£o
- Nunca deixar `DEBUG=True` em produ√ß√£o.
- Use DO Managed Postgres se poss√≠vel e configure `DB_HOST`/`DB_USER`/`DB_PASSWORD` corretamente.
- Fa√ßa backups autom√°ticos do banco e do storage.
- Remova ou separe depend√™ncias de ML da imagem do webapp (j√° criamos `requirements.prod.txt`).

7) Comandos √∫teis

```powershell
# Subir localmente
.\scripts\deploy.ps1

# Ver status
docker compose ps

# Logs
docker compose logs -f backend
docker compose logs -f frontend

# Entrar no container backend
docker compose exec backend bash

# Rodar migra√ß√µes manualmente
docker compose exec backend python manage.py migrate --noinput

# Criar superuser
docker compose exec backend python manage.py createsuperuser
```

8) Problemas conhecidos
- O `requirements.txt` original cont√©m pacotes de Machine Learning que tornam o build muito pesado. A imagem do backend foi ajustada para usar por padr√£o `requirements.prod.txt`. Se voc√™ precisa do ML no mesmo container, considere criar uma imagem separada ou usar um runner de CI com recursos suficientes.

Contato / pr√≥ximos passos
- Posso: (A) adicionar `django-storages` para DigitalOcean Spaces; (B) adicionar script de backup do Postgres; (C) automatizar a emiss√£o de certificados via certbot no `docker-compose` se preferir.

Escolha uma das op√ß√µes acima e eu implemento a pr√≥xima etapa.
# Chiva Computer & Service - Loja de Computadores

## üñ•Ô∏è Sobre o Projeto

Site da **Chiva Computer & Service**, loja especializada em produtos de inform√°tica em Mo√ßambique. O site apresenta um cat√°logo completo de computadores, laptops, perif√©ricos e acess√≥rios das melhores marcas do mercado.

## üéØ Caracter√≠sticas Principais

### üíª Produtos em Destaque
- **Laptops & Notebooks**: Desde ultrabooks executivos at√© laptops gaming
- **Desktops**: PCs personalizados para trabalho e gaming  
- **Monitores**: Telas de alta qualidade para todas as necessidades
- **Perif√©ricos**: Teclados, mouses, webcams e acess√≥rios
- **Componentes**: SSDs, mem√≥rias RAM e componentes para upgrade

### ‚ú® Funcionalidades
- **P√°ginas individuais** para cada produto com especifica√ß√µes completas
- **Carrinho de compras** integrado
- **Design responsivo** para mobile e desktop
- **Galeria de imagens** para cada produto
- **Autentica√ß√£o Firebase** (Email/Senha + Google)
- **√Årea do Cliente** com se√ß√µes de perfil, pedidos e endere√ßos (estrutura inicial)
- **Recupera√ß√£o de senha** via email
- **Painel Administrativo protegido**

### üõ†Ô∏è Tecnologias Utilizadas
- **Frontend**: React 18 + TypeScript
- **Styling**: Tailwind CSS + shadcn/ui
- **Roteamento**: React Router
- **Icons**: Lucide React
- **Build Tool**: Vite
- **Package Manager**: Bun

## üöÄ Como Executar

### Pr√©-requisitos
- Node.js 18+ ou Bun
- Git

### Instala√ß√£o e Execu√ß√£o
```bash
# Clonar o reposit√≥rio
git clone [repository-url]

# Navegar para o diret√≥rio
cd versao_1_chiva

# Instalar depend√™ncias
bun install
# ou
npm install

# Executar em desenvolvimento
bun run dev
# ou 
npm run dev

# Acessar o site
http://localhost:8083
```

## üèóÔ∏è Estrutura do Projeto

```
src/
‚îú‚îÄ‚îÄ components/          # Componentes reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ layout/         # Header, Footer
‚îÇ   ‚îú‚îÄ‚îÄ sections/       # Se√ß√µes da p√°gina (Hero, Products, etc.)
‚îÇ   ‚îî‚îÄ‚îÄ ui/            # Componentes base (Button, Card, etc.)
‚îú‚îÄ‚îÄ data/              # Dados dos produtos
‚îú‚îÄ‚îÄ lib/               # Utilit√°rios (formatPrice, etc.)
‚îú‚îÄ‚îÄ pages/             # P√°ginas principais
‚îî‚îÄ‚îÄ assets/            # Imagens e arquivos est√°ticos
```

## üì± P√°ginas Dispon√≠veis

- **`/`** - P√°gina inicial
- **`/produto/:id`** / **`/products/:id`** - P√°gina de produto
- **`/products`** - Listagem de produtos (filtros futuros)
- **`/carrinho`** - Carrinho de compras
- **Autentica√ß√£o**: `/login`, `/register`, `/forgot-password`
- **√Årea do Cliente (autenticado)**: `/account`, `/account/profile`, `/account/orders`, `/account/addresses`
- **Admin (autenticado)**: `/admin` e subse√ß√µes (produtos, categorias, etc.)
- **`/404`** - P√°gina de erro

## üõçÔ∏è Produtos Dispon√≠veis

### Laptops (IDs 1, 5)
- ASUS VivoBook 15 - Intel i7, 16GB RAM, 512GB SSD
- HP Pavilion 14 - AMD Ryzen 5, 12GB, 1TB

### Desktops (ID 2)
- Desktop Gaming Intel i5 + GTX 1660 Super

### Monitores (ID 3)
- Monitor Samsung 24'' Full HD VA Gaming

### Acess√≥rios (IDs 4, 7)
- Kit Gaming Teclado + Mouse RGB Mec√¢nico
- Webcam Logitech C920 Full HD 1080p

### Outros (IDs 6, 8)
- Impressora 3D Creality Ender 3 V2
- SSD Kingston NV2 500GB NVMe

## üìû Contato da Empresa

- **Telefone**: +258 87 849 4330
- **Email**: chivacomputer@gmail.com
- **WhatsApp**: +258 87 849 4330
- **Localiza√ß√£o**: Mo√ßambique

## üîß Funcionalidades T√©cnicas

### Sistema de Produtos
- Dados centralizados em `src/data/products.ts`
- Interface TypeScript para consist√™ncia
- Fun√ß√µes helper para busca e filtragem

### Roteamento Din√¢mico
- P√°ginas individuais baseadas em ID do produto
- Redirecionamento autom√°tico para 404 em produtos inexistentes
- Navega√ß√£o com breadcrumbs

### Design Responsivo
- Mobile-first approach
- Breakpoints otimizados para tablets e desktops
- Componentes adaptativos

## üìà Pr√≥ximas Melhorias

- [ ] Hist√≥rico real de pedidos do cliente
- [ ] Endere√ßos persistentes (CRUD) vinculados ao usu√°rio
- [ ] Integra√ß√£o com sistema de pagamento
- [ ] Wishlist de produtos
- [ ] Compara√ß√£o de produtos
- [ ] Sistema de cupons e descontos
- [ ] Upload de avatar do usu√°rio
- [ ] Verifica√ß√£o de email e roles

---

**Chiva Computer & Service** - 15 anos oferecendo tecnologia de qualidade em Mo√ßambique üá≤üáø
